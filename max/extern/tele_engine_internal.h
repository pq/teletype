#ifndef _TELE_ENGINE_INTERNAL_H_
#define _TELE_ENGINE_INTERNAL_H_

#include "tele_engine.h"
#include "teletype.h"

////////////////////////////////////////////////////////////////////////////////
//
// Constants/macros.
//
////////////////////////////////////////////////////////////////////////////////

#define DEFAULT_SCENE 0  // If unspecified.
#define SCENE_BUFFER 10000

////////////////////////////////////////////////////////////////////////////////
//
// Initialization and life-cycle.
//
////////////////////////////////////////////////////////////////////////////////

void tele_scene_init(tele_scene_t *scene);

void tele_engine_init(tele_engine_t *engine);

void redirect_tele_callbacks();

////////////////////////////////////////////////////////////////////////////////
//
// Processing.
//
////////////////////////////////////////////////////////////////////////////////

typedef struct {
    tele_command_t cmd;
    char error_detail[64];
} parse_result_t;

error_t parse_command(const char *cmd, parse_result_t *result);

void tele_engine_read_scene(tele_scene_t *scene, char *text);

tele_script_t *tele_engine_get_script(tele_engine_t *engine, int index);

////////////////////////////////////////////////////////////////////////////////
//
// Util.
//
////////////////////////////////////////////////////////////////////////////////

void remove_all(char *str, char c);

#endif /* _TELE_ENGINE_INTERNAL_H_ */
