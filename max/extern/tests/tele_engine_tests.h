#ifndef _TELE_ENGINE_TESTS_H_
#define _TELE_ENGINE_TESTS_H_

#include "greatest.h"
#include "tele_engine.h"
#include "tele_engine_internal.h"


void tele_scene_init(tele_scene_t *scene);

#define ASSERT_COMMAND_EQ(str, cmd) ASSERT_STR_EQ(str, print_command(cmd))

SUITE_EXTERN(engine_tests);

char *tt01_txt =
    "TRIANGLE MOUNTAIN\n"
    "\n"
    "1: RESET POSITION TO 0\n"
    "2: NEXT SCALE\n"
    "3: SHORTEN LOOP\n"
    "4: TOGGLE FORWARD/REVERSE\n"
    "5: THROW CV 2 A NEW NOTE\n"
    "6: RANDOMIZE LOOP LENGTH \n"
    "7: SET ROOT TO CV IN\n"
    "8: ADD 1 SEMI TO CV 4\n"
    "\n"
    "TEMPO ON METRO, SET WITH\n"
    "PARAM KNOB\n"
    "\n"
    "CV 1 TO OSC FREQ\n"
    "\n"
    "CHANGE SCALES IN TRACKER.\n"
    "\n"
    "PATCH CV 2 TO ANOTHER OSC\n"
    "FOR WEIRD COUNTERPOINT\n"
    "\n"
    "TRY PATCHING CV4 TO CV IN\n"
    "FOR AUTOMATIC TRANSPOSITION.\n"
    "\n"
    "\n"
    "\n"
    "#1\n"
    "P.I 0\n"
    "\n"
    "#2\n"
    "P.N WRAP ADD P.N 1 0 3\n"
    "P.I P.END\n"
    "\n"
    "#3\n"
    "P.END WRAP SUB P.END 1 1 7\n"
    "\n"
    "#4\n"
    "X EZ X\n"
    "\n"
    "#5\n"
    "S : CV 2 ADD N P.HERE V 1\n"
    "S : TR.PULSE B\n"
    "\n"
    "#6\n"
    "P.END RRAND 1 7\n"
    "\n"
    "#7\n"
    "Z IN\n"
    "\n"
    "#8\n"
    "CV 4 N WRAP 0 0 11\n"
    "\n"
    "#M\n"
    "IF X : P.PREV\n"
    "ELSE : P.NEXT\n"
    "CV 1 ADD N P.HERE Z\n"
    "M SUB 320 RSH PARAM 6\n"
    "S.ALL\n"
    "TR.PULSE A\n"
    "\n"
    "#I\n"
    "L A B : TR.TIME I 40\n"
    "\n"
    "#P\n"
    "8	8	8	8\n"
    "1	1	1	1\n"
    "0	0	0	0\n"
    "5	7	7	7\n"
    "\n"
    "0	0	0	0\n"
    "4	2	3	5\n"
    "7	5	6	7\n"
    "11	9	8	10\n"
    "12	12	11	14\n"
    "16	15	15	19\n"
    "19	19	17	21\n"
    "23	22	22	26\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n"
    "0	0	0	0\n";
// char path[] =
//"/XXX/data/tt00.txt";
// char buffer[100];
// FILE *fp = fopen(path, "r");
// while (fgets(buffer, sizeof(buffer), fp)) {
//    buffer[strcspn(buffer, "\n")] = 0;
//    printf("\"%s\\n\"\n", buffer);
//}
// fclose(fp);

#endif